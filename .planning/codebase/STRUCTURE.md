# Codebase Structure

**Analysis Date:** 2026-01-14

## Directory Layout

```
readandlearn/
├── extension/              # Chrome Extension (MV3)
│   ├── manifest.json       # Extension configuration
│   ├── background.js       # Service worker (API proxy)
│   ├── content.js          # Main extension logic (1813 lines)
│   └── icon.png            # Extension icon
├── translation-backend/    # Node.js Backend
│   ├── server.js           # Main Express app (1237 lines)
│   ├── package.json        # Dependencies
│   ├── package-lock.json   # Lock file
│   ├── node_modules/       # Installed packages
│   ├── init.sql            # Database schema
│   ├── Dockerfile          # Container config
│   ├── docker-compose.yml  # Service orchestration
│   ├── .dockerignore       # Docker ignore rules
│   ├── .env.example        # Configuration template
│   ├── import_frequency_words.js  # Dictionary import script
│   └── french_5k.txt       # Frequency word list
├── .planning/              # Project planning documents
├── install.sh              # Mac/Linux installer
├── install.ps1             # Windows installer
├── README.md               # User documentation
├── LICENSE                 # AGPL-3.0 license
└── .gitignore              # Git ignore rules
```

## Directory Purposes

**extension/**
- Purpose: Chrome browser extension (client-side)
- Contains: JavaScript files, manifest, icons
- Key files: `content.js` (main logic), `background.js` (API proxy)
- Subdirectories: None (flat structure)

**translation-backend/**
- Purpose: REST API server with PostgreSQL persistence
- Contains: Node.js application code, Docker configuration
- Key files: `server.js` (all endpoints), `init.sql` (database schema)
- Subdirectories: `node_modules/` only

## Key File Locations

**Entry Points:**
- `translation-backend/server.js` - Backend API entry (PORT 3000)
- `extension/content.js` - Extension content script entry
- `extension/background.js` - Extension service worker entry

**Configuration:**
- `translation-backend/.env.example` - Environment variable template
- `translation-backend/docker-compose.yml` - Docker service config
- `extension/manifest.json` - Chrome extension manifest

**Core Logic:**
- `translation-backend/server.js` lines 189-387 - CEFR analysis
- `translation-backend/server.js` lines 496-599 - Word definitions
- `translation-backend/server.js` lines 881-1060 - Question generation
- `extension/content.js` lines 182-356 - UI components
- `extension/content.js` lines 1632-1747 - Word highlighting

**Database:**
- `translation-backend/init.sql` - Full schema with pgvector

**Testing:**
- Not present - No test files or test directories

**Documentation:**
- `README.md` - Installation and usage guide

## Naming Conventions

**Files:**
- camelCase for JavaScript: `server.js`, `background.js`, `content.js`
- snake_case for data files: `init.sql`, `french_5k.txt`
- kebab-case for config: `docker-compose.yml`
- UPPERCASE for docs: `README.md`, `LICENSE`

**Directories:**
- kebab-case: `translation-backend`
- lowercase: `extension`, `node_modules`

**Special Patterns:**
- `.env.example` - Configuration template
- `.dockerignore` - Docker-specific ignore file

## Where to Add New Code

**New API Endpoint:**
- Primary code: Add route in `translation-backend/server.js`
- Tests: Create `translation-backend/__tests__/` (not present yet)
- Documentation: Update `README.md`

**New Extension Feature:**
- Implementation: Add to `extension/content.js` (consider splitting)
- Background logic: Add to `extension/background.js`
- Permissions: Update `extension/manifest.json`

**New Database Table:**
- Schema: Add to `translation-backend/init.sql`
- Queries: Add to relevant endpoint in `server.js`

**Utilities:**
- Backend: Add function in `server.js` (no separate utils folder)
- Extension: Add function in `content.js`

## Special Directories

**node_modules/**
- Purpose: npm dependencies
- Source: Generated by `npm install`
- Committed: No (in .gitignore)

**.planning/**
- Purpose: Project planning and codebase documentation
- Source: Manual and automated analysis
- Committed: Yes

---

*Structure analysis: 2026-01-14*
*Update when directory structure changes*
