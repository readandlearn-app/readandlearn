---
phase: 06-deployment-templates
plan: 01
type: execute
---

<objective>
Create Railway and Render one-click deployment templates for the backend.

Purpose: Enable non-technical users to deploy their own backend with a single click.
Output: railway.json, render.yaml, and updated README with deployment buttons.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan context:
@.planning/phases/05-design-system/05-02-SUMMARY.md

# Key files:
@translation-backend/Dockerfile
@translation-backend/docker-compose.yml
@README.md

**Tech stack:** Node.js 20, PostgreSQL with pgvector, Express
**Environment variables needed:**
- CLAUDE_API_KEY (required)
- PORT (default: 3000)
- DB_HOST, DB_PORT, DB_NAME, DB_USER, DB_PASSWORD
- ENABLE_CACHING (default: true)
- ENABLE_ANALYTICS (default: true)
- MAX_TEXT_WORDS (default: 800)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Railway deployment template</name>
  <files>translation-backend/railway.json</files>
  <action>
Create Railway deployment configuration:

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "Dockerfile"
  },
  "deploy": {
    "startCommand": "node server.js",
    "healthcheckPath": "/health",
    "healthcheckTimeout": 30,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3
  }
}
```
  </action>
  <verify>File exists with valid JSON</verify>
  <done>railway.json created with Dockerfile builder config</done>
</task>

<task type="auto">
  <name>Task 2: Create Render deployment blueprint</name>
  <files>translation-backend/render.yaml</files>
  <action>
Create Render Blueprint for one-click deploy:

```yaml
# render.yaml - Render Blueprint for Read & Learn Backend
# Deploy with one click: https://render.com/deploy

services:
  - type: web
    name: readandlearn-backend
    env: node
    region: oregon
    plan: starter
    buildCommand: npm ci --only=production
    startCommand: node server.js
    healthCheckPath: /health
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3000
      - key: CLAUDE_API_KEY
        sync: false
      - key: DB_HOST
        fromDatabase:
          name: readandlearn-db
          property: host
      - key: DB_PORT
        fromDatabase:
          name: readandlearn-db
          property: port
      - key: DB_NAME
        fromDatabase:
          name: readandlearn-db
          property: database
      - key: DB_USER
        fromDatabase:
          name: readandlearn-db
          property: user
      - key: DB_PASSWORD
        fromDatabase:
          name: readandlearn-db
          property: password
      - key: ENABLE_CACHING
        value: "true"
      - key: ENABLE_ANALYTICS
        value: "true"
      - key: MAX_TEXT_WORDS
        value: "800"
    autoDeploy: false

databases:
  - name: readandlearn-db
    databaseName: readandlearn
    user: readandlearn
    plan: starter
    postgresMajorVersion: 16
    ipAllowList: []
```
  </action>
  <verify>File exists with valid YAML structure</verify>
  <done>render.yaml created with web service and PostgreSQL database</done>
</task>

<task type="auto">
  <name>Task 3: Update README with deployment buttons</name>
  <files>README.md</files>
  <action>
Add one-click deploy buttons after the Quick Start section. Insert this after the "Manual Installation" section (before "## Usage"):

```markdown
### Cloud Deployment (One-Click)

Deploy your own backend instance to the cloud:

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/readandlearn?referralCode=readandlearn)

[![Deploy to Render](https://render.com/images/deploy-to-render-button.svg)](https://render.com/deploy?repo=https://github.com/readandlearn-app/readandlearn)

**After deployment:**
1. Set `CLAUDE_API_KEY` in your environment variables
2. Note your deployment URL (e.g., `https://readandlearn-backend.railway.app`)
3. Update the extension to point to your backend URL

**Estimated costs:**
- Railway: ~$5/month (Starter plan)
- Render: ~$7/month (Starter plan with PostgreSQL)
```
  </action>
  <verify>README.md contains "Deploy on Railway" text</verify>
  <done>README updated with Railway and Render deploy buttons</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] translation-backend/railway.json exists with valid JSON
- [ ] translation-backend/render.yaml exists with valid YAML
- [ ] README.md has deployment buttons section
- [ ] All environment variables documented
</verification>

<success_criteria>
- Railway template ready for one-click deployment
- Render blueprint ready for one-click deployment
- README guides users through cloud deployment
- Both templates reference the existing Dockerfile
</success_criteria>

<output>
After completion, create `.planning/phases/06-deployment-templates/06-01-SUMMARY.md`:

# Phase 6 Plan 01: Deployment Templates Summary

**[Substantive one-liner about what shipped]**

## Accomplishments
- [Key outcomes]

## Files Created/Modified
- [Files with descriptions]

## Decisions Made
- [Any runtime decisions]

## Issues Encountered
- [Problems and resolutions]

## Phase 6: Deployment Templates Complete

## Next Phase Readiness
- Ready for Phase 7: Housekeeping
</output>
